<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1340px" preserveAspectRatio="none" style="width:1002px;height:1340px;background:#FFFFFF;" version="1.1" viewBox="0 0 1002 1340" width="1002px" zoomAndPan="magnify"><defs><filter height="300%" id="f1h69z03zlzyb4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1h69z03zlzyb4)" height="226.7266" style="stroke:#000000;stroke-width:2.0;" width="483.5" x="10" y="57.2969"/><rect fill="#FFFFFF" filter="url(#f1h69z03zlzyb4)" height="226.7266" style="stroke:#000000;stroke-width:2.0;" width="528.5" x="155" y="337.1563"/><rect fill="#FFFFFF" filter="url(#f1h69z03zlzyb4)" height="226.7266" style="stroke:#000000;stroke-width:2.0;" width="504" x="317.5" y="577.8828"/><rect fill="#FFFFFF" filter="url(#f1h69z03zlzyb4)" height="226.7266" style="stroke:#000000;stroke-width:2.0;" width="833.5" x="155" y="818.6094"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="40.2969" y2="1297.1328"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="227" x2="227" y1="40.2969" y2="1297.1328"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="405.5" x2="405.5" y1="40.2969" y2="1297.1328"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="583.5" x2="583.5" y1="40.2969" y2="1297.1328"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="755.5" x2="755.5" y1="40.2969" y2="1297.1328"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="899.5" x2="899.5" y1="40.2969" y2="1297.1328"/><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="27" y="24.9951">Caller</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="20" y="1296.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="27" y="1316.1279">Caller</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="121" x="165" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="172" y="24.9951">PrincipalToken</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="121" x="165" y="1296.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="172" y="1316.1279">PrincipalToken</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="152" x="327.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="334.5" y="24.9951">KarmaCustomBond</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="152" x="327.5" y="1296.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="334.5" y="1316.1279">KarmaCustomBond</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="176" x="493.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="500.5" y="24.9951">KarmaCustomTreasury</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="176" x="493.5" y="1296.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="500.5" y="1316.1279">KarmaCustomTreasury</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="108" x="699.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="706.5" y="24.9951">PayoutToken</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="108" x="699.5" y="1296.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="706.5" y="1316.1279">PayoutToken</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="153" x="821.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="828.5" y="24.9951">KarmaDAOTreasury</text><rect fill="#FEFECE" filter="url(#f1h69z03zlzyb4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="153" x="821.5" y="1296.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="828.5" y="1316.1279">KarmaDAOTreasury</text><path d="M10,57.2969 L422,57.2969 L422,64.2969 L412,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="226.7266" style="stroke:#000000;stroke-width:2.0;" width="483.5" x="10" y="57.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="367" x="25" y="70.3638">Transfer amount of principal token to the bond</text><polygon fill="#A80036" points="215.5,167.2266,225.5,171.2266,215.5,175.2266,219.5,171.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49.5" x2="221.5" y1="171.2266" y2="171.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="56.5" y="90.4966">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="124.5" y="90.4966">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="72.5" y="105.6294">KarmaCustomBond,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="72.5" y="120.7622">amount, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="80.5" y="135.895">"method": "deposit"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="72.5" y="151.0278">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="64.5" y="166.1606">)</text><polygon fill="#A80036" points="393.5,272.0234,403.5,276.0234,393.5,280.0234,397.5,276.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="227.5" x2="399.5" y1="276.0234" y2="276.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="234.5" y="195.2935">tokenFallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="344.5" y="195.2935">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="250.5" y="210.4263">Caller,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="250.5" y="225.5591">amount, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="258.5" y="240.6919">"method": "deposit"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="250.5" y="255.8247">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="242.5" y="270.9575">)</text><path d="M347,296.0234 L347,321.0234 L460,321.0234 L460,306.0234 L450,296.0234 L347,296.0234 " fill="#FBFB77" filter="url(#f1h69z03zlzyb4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M450,296.0234 L450,306.0234 L460,306.0234 L450,296.0234 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="92" x="353" y="313.0903">decayDebt()</text><path d="M155,337.1563 L607,337.1563 L607,344.1563 L597,354.1563 L155,354.1563 L155,337.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="226.7266" style="stroke:#000000;stroke-width:2.0;" width="528.5" x="155" y="337.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="407" x="170" y="350.2231">Deposit the principal tokens to the Custom Treasury</text><polygon fill="#A80036" points="238.5,447.0859,228.5,451.0859,238.5,455.0859,234.5,451.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="232.5" x2="404.5" y1="451.0859" y2="451.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="244.5" y="370.356">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="312.5" y="370.356">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="260.5" y="385.4888">KarmaCustomBond,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="260.5" y="400.6216">amount, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="268.5" y="415.7544">"method": "deposit"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="260.5" y="430.8872">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="252.5" y="446.02">)</text><polygon fill="#A80036" points="571.5,551.8828,581.5,555.8828,571.5,559.8828,575.5,555.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="227.5" x2="577.5" y1="555.8828" y2="555.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="234.5" y="475.1528">tokenFallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="344.5" y="475.1528">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="250.5" y="490.2856">KarmaCustomBond,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="250.5" y="505.4185">amount, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="258.5" y="520.5513">"method": "deposit"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="250.5" y="535.6841">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="242.5" y="550.8169">)</text><path d="M317.5,577.8828 L729.5,577.8828 L729.5,584.8828 L719.5,594.8828 L317.5,594.8828 L317.5,577.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="226.7266" style="stroke:#000000;stroke-width:2.0;" width="504" x="317.5" y="577.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="367" x="332.5" y="590.9497">Pay the payout token back to the Custom Bond</text><polygon fill="#A80036" points="743.5,687.8125,753.5,691.8125,743.5,695.8125,747.5,691.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="583.5" x2="749.5" y1="691.8125" y2="691.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="590.5" y="611.0825">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="658.5" y="611.0825">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="606.5" y="626.2153">KarmaCustomBond,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="606.5" y="641.3481">amount, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="614.5" y="656.481">"method": "pay"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="606.5" y="671.6138">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="598.5" y="686.7466">)</text><polygon fill="#A80036" points="416.5,792.6094,406.5,796.6094,416.5,800.6094,412.5,796.6094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="410.5" x2="754.5" y1="796.6094" y2="796.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="422.5" y="715.8794">tokenFallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="532.5" y="715.8794">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="438.5" y="731.0122">KarmaCustomTreasury,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="438.5" y="746.145">amount, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="446.5" y="761.2778">"method": "pay"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="438.5" y="776.4106">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="430.5" y="791.5435">)</text><path d="M155,818.6094 L461,818.6094 L461,825.6094 L451,835.6094 L155,835.6094 L155,818.6094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="226.7266" style="stroke:#000000;stroke-width:2.0;" width="833.5" x="155" y="818.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261" x="170" y="831.6763">Transfer fee to the DAO Treasury</text><polygon fill="#A80036" points="238.5,928.5391,228.5,932.5391,238.5,936.5391,234.5,932.5391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="232.5" x2="404.5" y1="932.5391" y2="932.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="244.5" y="851.8091">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="312.5" y="851.8091">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="260.5" y="866.9419">KarmaCustomBond,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="260.5" y="882.0747">amount, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="268.5" y="897.2075">"method": "deposit"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="260.5" y="912.3403">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="252.5" y="927.4731">)</text><polygon fill="#A80036" points="888,1033.3359,898,1037.3359,888,1041.3359,892,1037.3359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="227.5" x2="894" y1="1037.3359" y2="1037.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106" x="234.5" y="956.606">tokenFallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="344.5" y="956.606">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="250.5" y="971.7388">KarmaCustomBond,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="250.5" y="986.8716">amount, {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="258.5" y="1002.0044">"method": "deposit"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="250.5" y="1017.1372">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="242.5" y="1032.27">)</text><path d="M325,1057.3359 L325,1082.3359 L481,1082.3359 L481,1067.3359 L471,1057.3359 L325,1057.3359 " fill="#FBFB77" filter="url(#f1h69z03zlzyb4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M471,1057.3359 L471,1067.3359 L481,1067.3359 L471,1057.3359 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="135" x="331" y="1074.4028">Update totalDebt</text><path d="M282,1096.4688 L282,1121.4688 L524,1121.4688 L524,1106.4688 L514,1096.4688 L282,1096.4688 " fill="#FBFB77" filter="url(#f1h69z03zlzyb4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M514,1096.4688 L514,1106.4688 L524,1106.4688 L514,1096.4688 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="221" x="288" y="1113.5356">Store Depositor Information</text><path d="M309,1135.6016 L309,1160.6016 L498,1160.6016 L498,1145.6016 L488,1135.6016 L309,1135.6016 " fill="#FBFB77" filter="url(#f1h69z03zlzyb4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M488,1135.6016 L488,1145.6016 L498,1145.6016 L488,1135.6016 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168" x="315" y="1152.6685">Increase total bonded</text><path d="M310,1174.7344 L310,1199.7344 L497,1199.7344 L497,1184.7344 L487,1174.7344 L310,1174.7344 " fill="#FBFB77" filter="url(#f1h69z03zlzyb4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M487,1174.7344 L487,1184.7344 L497,1184.7344 L487,1174.7344 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166" x="316" y="1191.8013">Increase total payout</text><path d="M303,1213.8672 L303,1238.8672 L503,1238.8672 L503,1223.8672 L493,1213.8672 L303,1213.8672 " fill="#FBFB77" filter="url(#f1h69z03zlzyb4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M493,1213.8672 L493,1223.8672 L503,1223.8672 L493,1213.8672 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="179" x="309" y="1230.9341">Update subsidy counter</text><path d="M351,1253 L351,1278 L455,1278 L455,1263 L445,1253 L351,1253 " fill="#FBFB77" filter="url(#f1h69z03zlzyb4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M445,1253 L445,1263 L455,1263 L445,1253 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="357" y="1270.0669">Adjust BCV</text><!--MD5=[f989e7dee0d645fe9312049aad004812]
@startuml
group Transfer amount of principal token to the bond
  Caller -> PrincipalToken : **transfer** ( \n    KarmaCustomBond, \n    amount, { \n      "method": "deposit" \n    } \n  )

  PrincipalToken -> KarmaCustomBond : **tokenFallback** ( \n    Caller, \n    amount, { \n      "method": "deposit" \n    } \n  )
end group

note over KarmaCustomBond : **decayDebt()**

group Deposit the principal tokens to the Custom Treasury
  KarmaCustomBond -> PrincipalToken : **transfer** ( \n    KarmaCustomBond, \n    amount, { \n      "method": "deposit" \n    } \n  )

  PrincipalToken -> KarmaCustomTreasury : **tokenFallback** ( \n    KarmaCustomBond, \n    amount, { \n      "method": "deposit" \n    } \n  )
end group

group Pay the payout token back to the Custom Bond
  KarmaCustomTreasury -> PayoutToken : **transfer** ( \n    KarmaCustomBond, \n    amount, { \n      "method": "pay" \n    } \n  )

  PayoutToken -> KarmaCustomBond : **tokenFallback** ( \n    KarmaCustomTreasury, \n    amount, { \n      "method": "pay" \n    } \n  )
  
end group


group Transfer fee to the DAO Treasury
  KarmaCustomBond -> PrincipalToken : **transfer** ( \n    KarmaCustomBond, \n    amount, { \n      "method": "deposit" \n    } \n  )

  PrincipalToken -> KarmaDAOTreasury : **tokenFallback** ( \n    KarmaCustomBond, \n    amount, { \n      "method": "deposit" \n    } \n  )
  
end group


note over KarmaCustomBond : **Update totalDebt**

note over KarmaCustomBond : **Store Depositor Information**

note over KarmaCustomBond : **Increase total bonded**

note over KarmaCustomBond : **Increase total payout**

note over KarmaCustomBond : **Update subsidy counter**

note over KarmaCustomBond : **Adjust BCV**
@enduml

PlantUML version 1.2022.1beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>